<app-loading-snipper>
</app-loading-snipper>
<div *ngIf="data.length>0">
  <div>
    <div class="panel panel-primary">
      <div class="panel-body">
        <div class="row">
          <div class="col-md-3">
            <h3> Agents </h3>
          </div>
          <div class="col-md-3">
            <input class="form-control" [(ngModel)]="filterQuery" placeholder="Search" />
          </div>
          <div class="col-md-3">
            <button type="submit" class="btn btn-warning" (click)="exporttoexcel()">export to excel</button>
          </div>
          <div class="col-md-3">
            <button type="submit" class="btn btn-info" (click)="registerNewAgent()">Register New Agent</button>
          </div>

        </div>
      </div>
    </div>
    <div class="table table-responsive">
      <table class="table table-striped" [mfData]="data| generalFilter : filterQuery " #mf="mfDataTable" [mfRowsOnPage]="rowsOnPage"
             [(mfSortBy)]="sortBy" [(mfSortOrder)]="sortOrder">
        <thead>
        <tr>
          <th style="width: auto">
            Index
          </th>
          <th style="width: auto">
            <mfDefaultSorter by="Name">Name</mfDefaultSorter>
          </th>
          <th style="width: auto">
            <mfDefaultSorter by="Id">Id</mfDefaultSorter>
          </th>
          <th style="width: auto">
            <mfDefaultSorter by="install_date">Enrolment Date</mfDefaultSorter>
          </th>
          <th style="width: auto">
            <mfDefaultSorter by="Uninstalled_on">Phone Number</mfDefaultSorter>
          </th>
          <th style="width: auto">
            <mfDefaultSorter by="Reason">Email</mfDefaultSorter>
          </th>
          <th style="width: auto">
            <mfDefaultSorter by="Recorded By">Location</mfDefaultSorter>
          </th>
        </tr>
        </thead>
        <tbody>
        <ng-container *ngFor="let item of mf.data; let i = index">
          <tr (click)="getAgentsales(item.idnumber)">
            <td>{{i+1}}</td>
            <td>{{item.firstname}} {{item.lastname}}</td>
            <td>{{item.idnumber}}</td>
            <td>{{item.dateofenrolment}}</td>
            <td>{{item.phonenumber}}</td>
            <td>{{item.email}}</td>
            <td>{{item.location}}, {{item.country}}</td>
          </tr>

        </ng-container>
        </tbody>
        <tfoot>
        <tr>
          <td colspan="12">
            <mfBootstrapPaginator [rowsOnPageSet]="[100,500]"></mfBootstrapPaginator>
          </td>
        </tr>
        </tfoot>
      </table>
    </div>
  </div>
</div>
